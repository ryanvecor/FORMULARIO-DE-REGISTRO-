<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Registro</title>
    <!-- Enlace al archivo CSS externo -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div class="form-container">
        <h2>Formulario de Registro</h2>
        <form action="#" method="post">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" required>

            <label for="apellidos">Apellidos:</label>
            <input type="text" id="apellidos" name="apellidos" required>

            <label for="sexo">Sexo:</label>
            <select id="sexo" name="sexo" required>
                <option value="masculino">Masculino</option>
                <option value="femenino">Femenino</option>
            </select>

            <!-- Cambio en el campo de fecha de nacimiento para usar un calendario -->
            <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
            <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required>

            <label for="movil">Móvil:</label>
            <input type="text" id="movil" name="movil" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>

            <input type="submit" value="Registrar">
        </form>
    </div>

    <script>
        document.querySelector('form').addEventListener('submit', function(event) {
            // Validar nombre y apellidos
            const nombre = document.getElementById('nombre').value;
            const apellidos = document.getElementById('apellidos').value;
            const nombreRegex = /^[A-Za-záéíóúÁÉÍÓÚñÑ ]+$/;
            if (!nombreRegex.test(nombre) || !nombreRegex.test(apellidos)) {
                alert("Los campos de Nombre y Apellidos solo pueden contener letras y espacios.");
                event.preventDefault();
                return;
            }

            // Validar móvil
            const movil = document.getElementById('movil').value;
            const movilRegex = /^[0-9]+$/;
            if (!movilRegex.test(movil)) {
                alert("El campo de Móvil solo puede contener números.");
                event.preventDefault();
                return;
            }

            // Validar email
            const email = document.getElementById('email').value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert("Por favor, introduce un email válido.");
                event.preventDefault();
                return;
            }

            // Validar edad
            const fechaNacimiento = new Date(document.getElementById('fecha_nacimiento').value);
            const edad = new Date().getFullYear() - fechaNacimiento.getFullYear();
            const mesActual = new Date().getMonth();
            const diaActual = new Date().getDate();

            if (mesActual < fechaNacimiento.getMonth() || 
                (mesActual === fechaNacimiento.getMonth() && diaActual < fechaNacimiento.getDate())) {
                edad--;
            }

            if (edad < 18) {
                alert("Debes tener al menos 18 años para registrarte.");
                event.preventDefault();
            }
        });
    </script>
</body>
</html>
